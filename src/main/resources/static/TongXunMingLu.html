<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="../../css/bootstrap.min.css" />
		<link rel="stylesheet" href="../../css/table.css" />
	</head>
	<body>
		<div class="container" id="xb" >
			<div class="row">
				  <div class="col-lg-9 col-md-8">
				  	 <h4>通讯名录</h4>
				  </div>
				  <div class="col-lg-3 col-md-4">
				  	  <input  type="text" placeholder="匹配工号/姓名/手机" />
				  	  <button type="button" class="btn btn-warning">搜索</button>
				  	  <button type="button" class="btn btn-danger">关闭</button>
				  </div>
			</div>
			<div class="row">
				  <div class="col-lg-9 col-md-9">
				 	
				  </div>
				  <div class="col-lg-1 col-md-1">
				       保存
				  </div>
				  <div class="col-lg-1 col-md-1">
				  	查询
				  </div>
				  <div class="col-lg-1 col-md-1">
				  	导出
				  </div>
			</div>
			<div class="row">
				  <div class="col-lg-12 col-md-12">
				  	  <table border="1">
				  	  	    <thead>
				  	  	    	<tr>
				  	  	    		<td></td>
				  	  	    		<td>部门</td>
				  	  	    		<td>员工编号</td>
				  	  	    		<td>姓名</td>
				  	  	    		<td>分机/短号</td>
				  	  	    		<td>直拨</td>
				  	  	    		<td>手机</td>
				  	  	    		<td>邮箱</td>
				  	  	    	</tr>
				  	  	    </thead>
				  	  	    <tbody>
				  	  	    	<tr v-for="temp in staff">
				  	  	    		<td></td>
				  	  	    		<td v-text="temp.stadepartment">成高</td>
				  	  	    		<td v-text="temp.stano">116665545645454</td>
				  	  	    		<td v-text="temp.staname">11</td>
				  	  	    		<td>11</td>
				  	  	    		<td>11</td>
				  	  	    		<td v-text="temp.staphone">11</td>
				  	  	    		<td>11</td>
				  	  	    	</tr>
				  	  	    </tbody>
				  	  </table>
				  </div>
	    	</div>
	    	<div id="bottomdiv">
				合计：{{count}}条记录
			</div>
		</div>
		
	</body>
	<script type="text/javascript" src="js/jquery-1.12.4.js" ></script>
	<script type="text/javascript" src="js/bootstrap.min.js" ></script>
	<script type="text/javascript" src="js/vue.js" ></script>
	<script>
		var emp = new Vue({
	        	el:"#xb",
	        	data:{
	        		staff:[],
	        		count:0
	        	},
	        	methods:{
	        	  se(){
	        	  	_this.staff.filter(function(temp){
					     return temp.statusid.statusid==$("select").val();
					})
	        	  }
	        	},
	        	created(){
	        		let _this =this;
	        		alert("a");
					   	$.getJSON(`http://127.0.0.1:8080/api/staffs`,function (data){
					   		
							 alert("aa");
							 _this.staff=data;
							 alert(_this.staff.length);
						})
					   	jQuery.ajax('http://127.0.0.1:8080/api/staffs',{
							type:'get',
							dataType:"text",
							success(data){
								if(data.code=="200"){
									alert('添加成功！');
								}
							},
							error(){
								alert("失败")
							}
							
					});
					   	$.getJSON(`http://127.0.0.1:8080/api/staffs/count`,function (data){
							 _this.count=data;
						})
					   	alert("aaa");
					 
			    }
		})
	</script>
</html>
